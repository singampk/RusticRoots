(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},803:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4147,23)),Promise.resolve().then(a.t.bind(a,8489,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,4541)),Promise.resolve().then(a.bind(a,8088))},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},4541:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var r=a(5155),i=a(2108);function s(e){let{children:t}=e;return(0,r.jsx)(i.SessionProvider,{children:t})}},8088:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>o,_:()=>n});var r=a(5155),i=a(2115);let s=(0,i.createContext)(null);function l(e,t){switch(t.type){case"ADD_ITEM":{let a,r=(a=e.items.find(e=>e.id===t.payload.id)?e.items.map(e=>e.id===t.payload.id?{...e,quantity:e.quantity+1}:e):[...e.items,{...t.payload,quantity:1}]).reduce((e,t)=>e+t.price*t.quantity,0),i=a.reduce((e,t)=>e+t.quantity,0);return{items:a,total:r,itemCount:i}}case"REMOVE_ITEM":{let a=e.items.filter(e=>e.id!==t.payload),r=a.reduce((e,t)=>e+t.price*t.quantity,0),i=a.reduce((e,t)=>e+t.quantity,0);return{items:a,total:r,itemCount:i}}case"UPDATE_QUANTITY":{let a=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0),r=a.reduce((e,t)=>e+t.price*t.quantity,0),i=a.reduce((e,t)=>e+t.quantity,0);return{items:a,total:r,itemCount:i}}case"CLEAR_CART":return{items:[],total:0,itemCount:0};case"LOAD_CART":{let e=t.payload.reduce((e,t)=>e+t.price*t.quantity,0),a=t.payload.reduce((e,t)=>e+t.quantity,0);return{items:t.payload,total:e,itemCount:a}}default:return e}}function o(e){let{children:t}=e,[a,o]=(0,i.useReducer)(l,{items:[],total:0,itemCount:0});return(0,i.useEffect)(()=>{let e=localStorage.getItem("rustic-roots-cart");if(e)try{let t=JSON.parse(e);o({type:"LOAD_CART",payload:t})}catch(e){console.error("Failed to load cart from localStorage:",e)}},[]),(0,i.useEffect)(()=>{localStorage.setItem("rustic-roots-cart",JSON.stringify(a.items))},[a.items]),(0,r.jsx)(s.Provider,{value:{state:a,dispatch:o},children:t})}function n(){let e=(0,i.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{var t=t=>e(e.s=t);e.O(0,[896,108,441,684,358],()=>t(803)),_N_E=e.O()}]);