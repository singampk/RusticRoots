"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{4615:(e,t,r)=>{r.d(t,{default:()=>c});var a=r(5155),s=r(2115),i=r(6874),o=r.n(i),l=r(2108),n=r(8088);function c(){var e,t,r,i;let{data:c}=(0,l.useSession)(),{state:d}=(0,n._)(),[m,x]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[p,g]=(0,s.useState)(0);return(0,s.useEffect)(()=>{d.itemCount>p&&(y(!0),setTimeout(()=>y(!1),600)),g(d.itemCount)},[d.itemCount,p]),(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(o(),{href:"/",className:"text-2xl font-bold text-amber-800",children:"Rustic Roots"})}),(0,a.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,a.jsx)(o(),{href:"/",className:"text-gray-700 hover:text-amber-800",children:"Home"}),(0,a.jsx)(o(),{href:"/products",className:"text-gray-700 hover:text-amber-800",children:"Products"}),(0,a.jsx)(o(),{href:"/about",className:"text-gray-700 hover:text-amber-800",children:"About"}),(0,a.jsx)(o(),{href:"/custom",className:"text-gray-700 hover:text-amber-800",children:"Custom Builds"}),(0,a.jsx)(o(),{href:"/contact",className:"text-gray-700 hover:text-amber-800",children:"Contact"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(o(),{href:"/cart",className:"relative text-gray-700 hover:text-amber-800 transition-transform duration-300 ".concat(b?"animate-bounce":""),children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.8 9M7 13l-1.8 9m4.8-9h6m-6 0v4m6-4v4"})}),d.itemCount>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-amber-800 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center transition-all duration-300 ".concat(b?"scale-125 bg-green-600":""),children:d.itemCount})]}),(0,a.jsx)("div",{className:"hidden md:block",children:c?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>x(!m),className:"flex items-center space-x-2 text-gray-700 hover:text-amber-800",children:[(0,a.jsx)("span",{children:null==(e=c.user)?void 0:e.name}),(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[(0,a.jsx)(o(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile"}),(0,a.jsx)(o(),{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),(null==(t=c.user)?void 0:t.role)==="ADMIN"&&(0,a.jsx)(o(),{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Admin Dashboard"}),(0,a.jsx)("button",{onClick:()=>(0,l.signOut)(),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign Out"})]})]}):(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(o(),{href:"/auth/signin",className:"text-gray-700 hover:text-amber-800",children:"Sign In"}),(0,a.jsx)(o(),{href:"/auth/signup",className:"bg-amber-800 text-white px-4 py-2 rounded-md hover:bg-amber-900",children:"Sign Up"})]})}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{onClick:()=>u(!h),className:"text-gray-700 hover:text-amber-800 focus:outline-none",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})]}),h&&(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t border-gray-200",children:[(0,a.jsx)(o(),{href:"/",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Home"}),(0,a.jsx)(o(),{href:"/products",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Products"}),(0,a.jsx)(o(),{href:"/about",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"About"}),(0,a.jsx)(o(),{href:"/custom",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Custom Builds"}),(0,a.jsx)(o(),{href:"/contact",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Contact"}),(0,a.jsx)("div",{className:"pt-4 pb-3 border-t border-gray-200",children:c?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-base font-medium text-gray-900",children:null==(r=c.user)?void 0:r.name}),(0,a.jsx)(o(),{href:"/profile",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Profile"}),(0,a.jsx)(o(),{href:"/orders",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"My Orders"}),(null==(i=c.user)?void 0:i.role)==="ADMIN"&&(0,a.jsx)(o(),{href:"/admin",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Admin Dashboard"}),(0,a.jsx)("button",{onClick:()=>{(0,l.signOut)(),u(!1)},className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(o(),{href:"/auth/signin",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-amber-800 hover:bg-gray-50",onClick:()=>u(!1),children:"Sign In"}),(0,a.jsx)(o(),{href:"/auth/signup",className:"block px-3 py-2 text-base font-medium bg-amber-800 text-white hover:bg-amber-900 mx-3 rounded-md",onClick:()=>u(!1),children:"Sign Up"})]})})]})})]})})}},8088:(e,t,r)=>{r.d(t,{CartProvider:()=>l,_:()=>n});var a=r(5155),s=r(2115);let i=(0,s.createContext)(null);function o(e,t){switch(t.type){case"ADD_ITEM":{let r,a=(r=e.items.find(e=>e.id===t.payload.id)?e.items.map(e=>e.id===t.payload.id?{...e,quantity:e.quantity+1}:e):[...e.items,{...t.payload,quantity:1}]).reduce((e,t)=>e+t.price*t.quantity,0),s=r.reduce((e,t)=>e+t.quantity,0);return{items:r,total:a,itemCount:s}}case"REMOVE_ITEM":{let r=e.items.filter(e=>e.id!==t.payload),a=r.reduce((e,t)=>e+t.price*t.quantity,0),s=r.reduce((e,t)=>e+t.quantity,0);return{items:r,total:a,itemCount:s}}case"UPDATE_QUANTITY":{let r=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0),a=r.reduce((e,t)=>e+t.price*t.quantity,0),s=r.reduce((e,t)=>e+t.quantity,0);return{items:r,total:a,itemCount:s}}case"CLEAR_CART":return{items:[],total:0,itemCount:0};case"LOAD_CART":{let e=t.payload.reduce((e,t)=>e+t.price*t.quantity,0),r=t.payload.reduce((e,t)=>e+t.quantity,0);return{items:t.payload,total:e,itemCount:r}}default:return e}}function l(e){let{children:t}=e,[r,l]=(0,s.useReducer)(o,{items:[],total:0,itemCount:0});return(0,s.useEffect)(()=>{let e=localStorage.getItem("rustic-roots-cart");if(e)try{let t=JSON.parse(e);l({type:"LOAD_CART",payload:t})}catch(e){console.error("Failed to load cart from localStorage:",e)}},[]),(0,s.useEffect)(()=>{localStorage.setItem("rustic-roots-cart",JSON.stringify(r.items))},[r.items]),(0,a.jsx)(i.Provider,{value:{state:r,dispatch:l},children:t})}function n(){let e=(0,s.useContext)(i);if(!e)throw Error("useCart must be used within a CartProvider");return e}}}]);