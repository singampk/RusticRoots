(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6267:(e,t,s)=>{Promise.resolve().then(s.bind(s,9219))},9219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),i=s(2108),l=s(5695),n=s(6874),o=s.n(n),d=s(4615),c=s(6766);function x(e){let{images:t,onImagesChange:s,maxImages:i=20,mainImageIndex:l=0,onMainImageChange:n}=e,[o,d]=(0,a.useState)(!1),x=(0,a.useRef)(null),m=async e=>{let r=e.target.files;if(!r||0===r.length)return;if(t.length+r.length>i)return void alert("You can only upload up to ".concat(i," images"));d(!0);let a=Array.from(r).map(u);try{let e=(await Promise.all(a)).filter(e=>null!==e);s([...t,...e])}catch(e){console.error("Upload failed:",e),alert("Some images failed to upload. Please try again.")}finally{d(!1),x.current&&(x.current.value="")}},u=async e=>{let t=new FormData;t.append("image",e);try{let e=await fetch("/api/upload/image",{method:"POST",body:t});if(e.ok)return(await e.json()).imageUrl;{let t=await e.json();return console.error("Upload error:",t),null}}catch(e){return console.error("Upload error:",e),null}},h=e=>{let r=t.filter((t,s)=>s!==e);s(r),n&&(e===l&&r.length>0?n(0):e<l&&n(l-1))},p=e=>{console.log("Setting main image to index:",e),n&&n(e)},g=(e,r)=>{if(r<0||r>=t.length)return;let a=[...t],[i]=a.splice(e,1);a.splice(r,0,i),s(a),n&&(e===l?n(r):e<l&&r>=l?n(l-1):e>l&&r<=l&&n(l+1))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Product Images (",t.length,"/",i,")"]}),t.length<i&&(0,r.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},disabled:o,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Images"]})]}),(0,r.jsx)("input",{ref:x,type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden"}),o&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{className:"text-sm text-blue-800",children:"Uploading images..."})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.map((e,s)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)(c.default,{src:e,alt:"Product image ".concat(s+1),fill:!0,className:"object-cover",onError:()=>{console.error("Failed to load image:",e)}})}),(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Remove button clicked for image:",s),h(s)},className:"absolute top-1 right-1 p-1 bg-red-600 rounded-full hover:bg-red-700 shadow-lg z-30 opacity-80 hover:opacity-100 transition-opacity",title:"Remove image",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s!==l&&n&&(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Set Main button clicked for image:",s),p(s)},className:"absolute top-1 left-1 px-2 py-1 bg-amber-600 text-white text-xs font-semibold rounded hover:bg-amber-700 shadow-lg z-30 opacity-80 hover:opacity-100 transition-opacity",title:"Set as main image",children:"Main"}),s===l&&(0,r.jsx)("div",{className:"absolute top-1 left-1 bg-amber-800 text-white text-xs px-2 py-1 rounded font-semibold shadow-lg z-30",children:"Main Image"}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-lg pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30 rounded-lg"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-auto",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[s>0&&(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),g(s,s-1)},className:"p-2 bg-white rounded-full hover:bg-gray-100 cursor-pointer shadow-lg",title:"Move left",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s<t.length-1&&(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),g(s,s+1)},className:"p-2 bg-white rounded-full hover:bg-gray-100 cursor-pointer shadow-lg",title:"Move right",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})]}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-75",children:[s+1," ",s===l?"(Main)":""]})]},s)),t.length<i&&(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},disabled:o,className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-gray-400 transition-colors disabled:opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Add Image"})]})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["• Upload up to ",i," images (max 10MB each)"]}),(0,r.jsx)("p",{children:"• Supported formats: JPG, PNG, WebP"}),(0,r.jsx)("p",{children:'• Click "Set Main" to choose the main product image'}),(0,r.jsx)("p",{children:"• Use arrow buttons to reorder images"}),(0,r.jsx)("p",{children:"• Hover over images to see management options"})]})]})}function m(){var e;let{data:t,status:s}=(0,i.useSession)(),n=(0,l.useRouter)(),[c,m]=(0,a.useState)("overview"),[u,h]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[y,f]=(0,a.useState)(!0),[b,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)({name:"",description:"",price:"",category:"Tables",stock:"",images:["/placeholder-furniture.svg"],mainImageIndex:0,featured:!1}),[C,L]=(0,a.useState)(!1),[M,I]=(0,a.useState)(""),[P,S]=(0,a.useState)("");async function D(){try{let[e,t]=await Promise.all([fetch("/api/products",{credentials:"include"}),fetch("/api/orders",{credentials:"include"})]);if(e.ok){let t=await e.json();h(t)}if(t.ok){let e=await t.json();g(e)}}catch(e){console.error("Failed to fetch data:",e)}finally{f(!1)}}(0,a.useEffect)(()=>{var e;if("loading"!==s){if(!t||(null==(e=t.user)?void 0:e.role)!=="ADMIN")return void n.push("/");D()}},[t,s,n]);let A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),B=e=>new Date(e).toLocaleDateString(),W=e=>{N(e),k({name:e.name,description:e.description,price:e.price.toString(),category:e.category,stock:e.stock.toString(),images:e.images.length>0?e.images:["/placeholder-furniture.svg"],mainImageIndex:0,featured:e.featured}),j(!0),I(""),S("")},O=(e,t)=>{k(s=>({...s,[e]:t}))},T=async e=>{e.preventDefault(),L(!0),I("");try{let e=[...w.images];if(w.mainImageIndex>0&&w.mainImageIndex<e.length){let t=e[w.mainImageIndex];e.splice(w.mainImageIndex,1),e.unshift(t)}let t={name:w.name,description:w.description,price:parseFloat(w.price),category:w.category,stock:parseInt(w.stock),images:e,featured:w.featured},s=v?"/api/products/".concat(v.id):"/api/products",r=v?"PATCH":"POST",a=await fetch(s,{method:r,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok)S(v?"Product updated successfully!":"Product created successfully!"),j(!1),D();else{let e=await a.json();I(e.error||"Failed to save product")}}catch(e){I("Network error occurred")}finally{L(!1)}},E=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"? This action cannot be undone.')))try{let t=await fetch("/api/products/".concat(e),{method:"DELETE",credentials:"include"});if(t.ok)S("Product deleted successfully!"),D();else{let e=await t.json();I(e.error||"Failed to delete product")}}catch(e){I("Network error occurred")}};if("loading"===s||y)return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(d.default,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})})]});if(!t||(null==(e=t.user)?void 0:e.role)!=="ADMIN")return null;let F=p.reduce((e,t)=>e+t.total,0),H=u.length,U=p.length,z=p.slice(0,5);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(d.default,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your products, orders, and customers"})]}),P&&(0,r.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-green-800",children:P})}),(0,r.jsx)("button",{onClick:()=>S(""),className:"ml-auto text-green-400 hover:text-green-600",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),M&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-red-800",children:M})}),(0,r.jsx)("button",{onClick:()=>I(""),className:"ml-auto text-red-400 hover:text-red-600",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview"},{id:"products",name:"Products"},{id:"orders",name:"Orders"}].map(e=>(0,r.jsx)("button",{onClick:()=>m(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(c===e.id?"border-amber-500 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.name},e.id))})}),"overview"===c&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-amber-800",children:A(F)})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Total Products"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-amber-800",children:H})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-amber-800",children:U})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Orders"}),(0,r.jsxs)(o(),{href:"/admin/orders",className:"bg-amber-800 text-white px-4 py-2 rounded-md hover:bg-amber-900 text-sm flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Manage Orders"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id.slice(-8)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.user.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.total)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B(e.createdAt)})]},e.id))})]})})]})]}),"products"===c&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Products (",u.length,")"]}),(0,r.jsxs)("button",{onClick:()=>{N(null),k({name:"",description:"",price:"",category:"Tables",stock:"",images:["/placeholder-furniture.svg"],mainImageIndex:0,featured:!1}),j(!0),I(""),S("")},className:"bg-amber-800 text-white px-4 py-2 rounded-md hover:bg-amber-900 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Product"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Featured"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.price)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.stock}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.featured?(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:"Featured"}):(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Regular"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsxs)("button",{onClick:()=>W(e),className:"text-amber-600 hover:text-amber-900 mr-4 inline-flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>E(e.id,e.name),className:"text-red-600 hover:text-red-900 inline-flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},e.id))})]})})]}),"orders"===c&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"All Orders"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id.slice(-8)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.user.name}),(0,r.jsx)("div",{className:"text-gray-400",children:e.user.email})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.items.length," items"]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.total)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B(e.createdAt)})]},e.id))})]})})]}),b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:v?"Edit Product":"Add New Product"}),(0,r.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("form",{onSubmit:T,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:w.name,onChange:e=>O("name",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 bg-white",placeholder:"Enter product name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,r.jsxs)("select",{required:!0,value:w.category,onChange:e=>O("category",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 bg-white",children:[(0,r.jsx)("option",{value:"Tables",children:"Tables"}),(0,r.jsx)("option",{value:"Chairs",children:"Chairs"}),(0,r.jsx)("option",{value:"Storage",children:"Storage"}),(0,r.jsx)("option",{value:"Decor",children:"Decor"}),(0,r.jsx)("option",{value:"Outdoor",children:"Outdoor"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($) *"}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:w.price,onChange:e=>O("price",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 bg-white",placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity *"}),(0,r.jsx)("input",{type:"number",min:"0",required:!0,value:w.stock,onChange:e=>O("stock",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 bg-white",placeholder:"0"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"featured",checked:w.featured,onChange:e=>O("featured",e.target.checked),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"featured",className:"ml-2 block text-sm font-medium text-gray-700",children:"Feature this product on homepage"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,r.jsx)("textarea",{required:!0,rows:4,value:w.description,onChange:e=>O("description",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 bg-white",placeholder:"Enter detailed product description"})]}),(0,r.jsx)("div",{children:(0,r.jsx)(x,{images:w.images,onImagesChange:e=>{k(t=>({...t,images:e}))},maxImages:20,mainImageIndex:w.mainImageIndex,onMainImageChange:e=>{k(t=>({...t,mainImageIndex:e}))}})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:()=>j(!1),disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:C,className:"px-4 py-2 text-sm font-medium text-white bg-amber-800 border border-transparent rounded-md hover:bg-amber-900 disabled:opacity-50 flex items-center",children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v?"Updating...":"Creating..."]}):v?"Update Product":"Create Product"})]})]})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[108,874,766,615,441,684,358],()=>t(6267)),_N_E=e.O()}]);